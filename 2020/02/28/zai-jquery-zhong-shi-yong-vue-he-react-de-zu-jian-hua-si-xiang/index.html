<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>在 jquery 中使用 vue 和 react 的组件化思想 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="起因最近遇到一个比较奇葩的场景， 业务需求没有描述清楚导致原来逻辑全部被修改。实际需求只是增加一个类型， 在选择该类型时展示的 UI 和需要提交的表单元素都要修改。当时在看代码时， 代码已经达到了一千多行， 对于一个页面来说还是比较多的。而且又需要快速恢复之前的逻辑并且加上现有的需求， 我一直在考虑有没有一个好的模式能够简单实现需求。最终， 我尝试了使用类似 vue 和 react 组件的方法来实">
<meta property="og:type" content="article">
<meta property="og:title" content="在 jquery 中使用 vue 和 react 的组件化思想">
<meta property="og:url" content="http://cumbermiao.github.io/blog/2020/02/28/zai-jquery-zhong-shi-yong-vue-he-react-de-zu-jian-hua-si-xiang/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="起因最近遇到一个比较奇葩的场景， 业务需求没有描述清楚导致原来逻辑全部被修改。实际需求只是增加一个类型， 在选择该类型时展示的 UI 和需要提交的表单元素都要修改。当时在看代码时， 代码已经达到了一千多行， 对于一个页面来说还是比较多的。而且又需要快速恢复之前的逻辑并且加上现有的需求， 我一直在考虑有没有一个好的模式能够简单实现需求。最终， 我尝试了使用类似 vue 和 react 组件的方法来实">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-02-28T13:56:22.000Z">
<meta property="article:modified_time" content="2020-04-17T09:46:36.651Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/blog/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://cumbermiao.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-zai-jquery-zhong-shi-yong-vue-he-react-de-zu-jian-hua-si-xiang" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/02/28/zai-jquery-zhong-shi-yong-vue-he-react-de-zu-jian-hua-si-xiang/" class="article-date">
  <time datetime="2020-02-28T13:56:22.000Z" itemprop="datePublished">2020-02-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      在 jquery 中使用 vue 和 react 的组件化思想
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>最近遇到一个比较奇葩的场景， 业务需求没有描述清楚导致原来逻辑全部被修改。实际需求只是增加一个类型， 在选择该类型时展示的 UI 和需要提交的表单元素都要修改。<br>当时在看代码时， 代码已经达到了一千多行， 对于一个页面来说还是比较多的。而且又需要快速恢复之前的逻辑并且加上现有的需求， 我一直在考虑有没有一个好的模式能够简单实现需求。<br>最终， 我尝试了使用类似 vue 和 react 组件的方法来实现。</p>
<h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>首先理一下业务需求：<br>实现新增编辑和查看一个表单， 在新增时有一个升舱类型3， 其对应的值为 1,2,3 ,其中 1,2 与 3 所对应的视图不一样， 具体体现在  1,2 会有座位表格信息， 3 没有座位表格信息， 1,2 的价格表格信息与 3 展现的字段不一致， 最大的区别在于 1,2 对于国内航线和国际航线可以一起提交， 3 只能选择一种航线类型。</p>
<p>当时的思路就是设计一个模式， 可以兼容现在的类型以及之前的类型并且可以最小改动现状的代码。当时想使用类似 vue 和 react 这种数据驱动的方式， 在 state 中定义 upgfType 变量表示 升舱类型， 根据 upgfType 不同的值， 使用不同的 UI 。</p>
<h3 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h3><h4 id="methods-amp-hooks-函数代理"><a href="#methods-amp-hooks-函数代理" class="headerlink" title="methods &amp; hooks 函数代理"></a>methods &amp; hooks 函数代理</h4><p>为了拥有类似 vue 的开发体验， 我对 methods 以及 hooks 中的函数进行了 this 绑定， 绑定在 ==组件对象模型==上， 此处需要区分组件和组件模型的概念。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//所有组件对象需要调用该函数，否则 this 指向错误</span></span><br><span class="line"><span class="keyword">var</span> BindThisInMethodsHooks = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> methods = <span class="built_in">Object</span>.keys(obj.methods);</span><br><span class="line">    <span class="keyword">var</span> hooks = <span class="built_in">Object</span>.keys(obj.hooks);</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; methods.length) &#123;</span><br><span class="line">        <span class="keyword">var</span> methodName = methods[i];</span><br><span class="line">        obj.methods[methodName] = obj.methods[methodName].bind(obj);</span><br><span class="line">        proxyMethod(methodName, obj);</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; hooks.length) &#123;</span><br><span class="line">        <span class="keyword">var</span> hookName = hooks[i];</span><br><span class="line">        obj.hooks[hookName] = obj.hooks[hookName].bind(obj);</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//标记以及Bind 过 this</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(obj, <span class="string">"_bind"</span>, &#123;</span><br><span class="line">        configurable: <span class="literal">false</span>,</span><br><span class="line">        <span class="keyword">get</span>: function() &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proxyMethod = <span class="function"><span class="keyword">function</span>(<span class="params">methodName, obj</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(obj, methodName, &#123;</span><br><span class="line">        <span class="keyword">get</span>: function() &#123;</span><br><span class="line">            <span class="keyword">return</span> obj.methods[methodName];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>以上代码中还在组件模型对象上添加了一个属性 <code>_bind</code> 用来表示该组件模型对象以及调用过 <code>BindThisInMethodsHooks</code> 绑定过 this 。 如果重复调用的话， 会报重复使用 Object.defineProperty 定义属性的错误。</p>
<h4 id="组件模型对象"><a href="#组件模型对象" class="headerlink" title="组件模型对象"></a>组件模型对象</h4><p>定义的具体组件模型如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> noop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> emptyObj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> Base = &#123;</span><br><span class="line">      el: <span class="string">""</span>, <span class="comment">// 挂载的 dom 节点</span></span><br><span class="line">      template: <span class="string">""</span>, <span class="comment">//html 字符串</span></span><br><span class="line">      instance: <span class="literal">undefined</span>, <span class="comment">// Component 实例</span></span><br><span class="line">      state: emptyObj,</span><br><span class="line">      props: emptyObj, <span class="comment">//未使用</span></span><br><span class="line">      methods: emptyObj,</span><br><span class="line">      hooks: &#123;</span><br><span class="line">          beforeCreate: noop, <span class="comment">//调用 http 初始化数据的地方</span></span><br><span class="line">          created: noop, <span class="comment">//根据数据渲染 template 的地方, 此处需要将 template 渲染完成</span></span><br><span class="line">          mounted: noop, <span class="comment">//组件已挂载， 此处用来监听事件</span></span><br><span class="line">          beforeUpdate: noop, <span class="comment">//组件更新前， 用于 state 改变之后， template 中结构发生变化， 卸载 mounted 中监听的事件</span></span><br><span class="line">          updated: noop, <span class="comment">// 组件state UI 已经更新， 用于 template 结构变化后， 重新监听事件</span></span><br><span class="line">          beforeDestory: noop, <span class="comment">//卸载之前, 此处用来卸载事件</span></span><br><span class="line">          destoryed: noop <span class="comment">//组件已卸载</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<p>  当时在定义 hooks 即生命周期时， 首先关注的就是 <code>beforeCreate</code> , <code>created</code>, <code>mounted</code>, <code>beforeDestory</code>。<br>   与 vue 不同，<code>beforeCreate</code> 生命周期我是用来获取渲染数据的， 实际场景中就是发送 http 请求， 这样使用有一个坏处： 如果你在 <code>beforeCreate</code> 中的请求时间较长， 那么后面的 hooks 无法执行， 导致初始 UI 长时间空白。    </p>
<p>   <code>created</code> 周期我是用来渲染数据至 template 中的， 此周期生成展示在页面上的 html 字符串。</p>
<p>  <code>mounted</code> 周期是在 html 已经插入到 el 上， 此时我们可能需要监听一些事件， 例如在业务中点击国内航线需要展示国内航线的表格， 点击国际航线需要展示国际航线的表格。以及需要使用 bootstrap-table  生成价格信息或者座位信息表格。</p>
<p>  <code>beforeDestory</code> 周期主要是用来卸载监听的事件， 此处比较繁琐的是你在 mounted 所有的监听事件回调都需要使用具名函数， 否则此处你无法卸载。</p>
<p>  以上三个周期看似够用， 但实际上在你需要更新 UI 时就相形见绌了。例如， 原本的升舱类型为 1， 此时我改变为 3， 就需要重新生成表单。<br>重新生成 UI 那么就要卸载之前 UI 的监听， 此处使用 <code>beforeUpdate</code> 周期来做这种事。<br>同样在重新生成 UI 且挂载后你需要为当前 UI 添加事件监听， 可以在 <code>updated</code>周期中处理。</p>
<p>在以上描述中， 我们可以看到从 <code>mounted</code> 到 <code>updated</code> 的过程中需要处理很多的事件监听以及卸载。而在 Vue 中， 由于有自己的 template 模板， 以及 @ 的事件监听指令，它可以集中处理事件的监听和卸载， 不需要  coder 自己手动卸载。 当然， Vue 也提供了自己的合成事件来减轻 coder 自己的负担。<br>Vue 有了 template 模板之后， 他还可以做一件事， 拆分子组件。 在 template 解析到 options.components 一样的标签时， 它知道这是一个子组件， 从而去初始化子组件。而在我的实现中 template 是 html 字符串， 没有解析 template 的过程， 也就无法实现子组件， 没有子组件那么在根据 state 更新 UI 时， 就需要 coder 自己手动去处理事件的卸载与监听。 如果有子组件， 这些完全可以在子组件的 hooks 中实现， 当前组件的代码就会清晰很多。</p>
<h4 id="组件类"><a href="#组件类" class="headerlink" title="组件类"></a>组件类</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Component</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!obj._bind) &#123;</span><br><span class="line">          BindThisInMethodsHooks(obj);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.fiber = obj;</span><br><span class="line">      <span class="keyword">this</span>.fiber.initState = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.fiber.state);</span><br><span class="line">      <span class="keyword">this</span>.fiber.instance = <span class="keyword">this</span>;</span><br><span class="line">      <span class="keyword">var</span> deferred = <span class="keyword">this</span>.fiber.hooks.beforeCreate();</span><br><span class="line">      <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (deferred) &#123;</span><br><span class="line">          deferred</span><br><span class="line">              .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                  _this.render();</span><br><span class="line">                  _this.fiber.hooks.mounted();</span><br><span class="line">              &#125;)</span><br><span class="line">              .fail(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          _this.render();</span><br><span class="line">          _this.fiber.hooks.mounted();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Component.prototype.render = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.fiber.hooks.created();</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"=========render========="</span>);</span><br><span class="line">      <span class="keyword">var</span> $el = $(<span class="keyword">this</span>.fiber.el);</span><br><span class="line">      $el.html(<span class="keyword">this</span>.fiber.template);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Component.prototype.rerender = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"=========rerender========="</span>);</span><br><span class="line">      <span class="keyword">this</span>.fiber.template = <span class="keyword">this</span>.fiber.initTemplate;</span><br><span class="line">      <span class="keyword">this</span>.fiber.hooks.created();</span><br><span class="line">      <span class="keyword">this</span>.fiber.hooks.beforeUpdate();</span><br><span class="line">      <span class="keyword">var</span> $el = $(<span class="keyword">this</span>.fiber.el);</span><br><span class="line">      $el.html(<span class="keyword">this</span>.fiber.template);</span><br><span class="line">      <span class="keyword">this</span>.fiber.hooks.updated();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Component.prototype.destory = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.fiber.hooks.beforeDestory();</span><br><span class="line">      $(<span class="keyword">this</span>.fiber.el).html(<span class="string">""</span>);</span><br><span class="line">      <span class="keyword">this</span>.fiber.hooks.destoryed();</span><br><span class="line">      <span class="keyword">this</span>.fiber.state = <span class="keyword">this</span>.fiber.initState;</span><br><span class="line">      <span class="keyword">delete</span> <span class="keyword">this</span>.fiber.initState;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<p>  compnent 类的实现就相对简单， 其主要目的是按照顺序执行组件模型中的 hooks ， 并且提供 rerender 和 destory 方法。<br>  以上代码中， 用到了 jquery 中 defer 对象， 确保 <code>beforeCreate</code> 中的异步数据请求到之后再渲染 template 。<br>  提供 rerender 方法的主要原因是没有实现根据 state 里面的状态变更自动更新， 因为有些情况下 state 里面的数据更新之后并不需要更新页面， 所以 rerender 就留给 coder 自己去实现哪些 state 更新之后去冲渲染。例如本例中需要更加 upgfType 自动更新 UI。<br> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> editModal;</span><br><span class="line">    $(<span class="string">"#exampleModal"</span>).on(<span class="string">"shown.bs.modal"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"relatedTarget"</span>, e.relatedTarget);</span><br><span class="line">        <span class="keyword">if</span> (e.relatedTarget === <span class="literal">undefined</span>) &#123;</span><br><span class="line">            formModal.state.isEdit = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        editModal = <span class="keyword">new</span> Component(formModal);</span><br><span class="line">        <span class="keyword">var</span> state = editModal.fiber.state;</span><br><span class="line">        <span class="keyword">var</span> upgfType = state.upgfType;</span><br><span class="line">        <span class="keyword">var</span> airlineType = state.airlineType;</span><br><span class="line">        <span class="built_in">Object</span>.defineProperties(state, &#123;</span><br><span class="line">            upgfType: &#123;</span><br><span class="line">                <span class="keyword">get</span>: function() &#123;</span><br><span class="line">                    <span class="keyword">return</span> upgfType;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="keyword">set</span>: function(newVal) &#123;</span><br><span class="line">                    upgfType = newVal;</span><br><span class="line">                    editModal.rerender();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            airlineType: &#123;</span><br><span class="line">                <span class="keyword">get</span>: function() &#123;</span><br><span class="line">                    <span class="keyword">return</span> airlineType;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="keyword">set</span>: function(newV) &#123;</span><br><span class="line">                    airlineType = newV;</span><br><span class="line">                    <span class="keyword">if</span> (state.upgfType === <span class="string">"3"</span>) &#123;</span><br><span class="line">                        editModal.rerender();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这次实践组件化的过程， 对 vue 的生命周期有了更深的体验， 当然也明白了 react 为什么要出 hooks 原因。后面如果有机会可以借助开源的 template 库自己实现子组件。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cumbermiao.github.io/blog/2020/02/28/zai-jquery-zhong-shi-yong-vue-he-react-de-zu-jian-hua-si-xiang/" data-id="ck940dc3b00250knwb9tj92ac" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2020/03/05/mian-shi/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          记今年面试的感受
        
      </div>
    </a>
  
  
    <a href="/blog/2020/02/22/js-arrayprototypesort-dui-zi-fu-chuan-pai-xu-de-wen-ti/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">JS Array.prototype.sort 对字符串排序的问题</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Array/" rel="tag">Array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Sparse-Array/" rel="tag">Sparse Array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/diff/" rel="tag">diff</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/fiber/" rel="tag">fiber</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/hooks/" rel="tag">hooks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/promise/" rel="tag">promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/sort/" rel="tag">sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/string/" rel="tag">string</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" rel="tag">性能优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E6%97%A5%E5%B8%B8/" rel="tag">日常</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E9%97%AD%E5%8C%85/" rel="tag">闭包</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/Array/" style="font-size: 13.33px;">Array</a> <a href="/blog/tags/Sparse-Array/" style="font-size: 10px;">Sparse Array</a> <a href="/blog/tags/diff/" style="font-size: 10px;">diff</a> <a href="/blog/tags/fiber/" style="font-size: 10px;">fiber</a> <a href="/blog/tags/git/" style="font-size: 10px;">git</a> <a href="/blog/tags/hooks/" style="font-size: 10px;">hooks</a> <a href="/blog/tags/js/" style="font-size: 20px;">js</a> <a href="/blog/tags/promise/" style="font-size: 10px;">promise</a> <a href="/blog/tags/react/" style="font-size: 16.67px;">react</a> <a href="/blog/tags/sort/" style="font-size: 10px;">sort</a> <a href="/blog/tags/string/" style="font-size: 10px;">string</a> <a href="/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 10px;">性能优化</a> <a href="/blog/tags/%E6%97%A5%E5%B8%B8/" style="font-size: 10px;">日常</a> <a href="/blog/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a> <a href="/blog/tags/%E9%97%AD%E5%8C%85/" style="font-size: 10px;">闭包</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/01/">January 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2020/04/17/vscode-config/">vscode-config</a>
          </li>
        
          <li>
            <a href="/blog/2020/03/30/qian-duan-jian-kong/">前端监控</a>
          </li>
        
          <li>
            <a href="/blog/2020/03/27/qian-duan-gong-cheng-hua/">前端工程化</a>
          </li>
        
          <li>
            <a href="/blog/2020/03/26/xing-neng-you-hua/">性能优化</a>
          </li>
        
          <li>
            <a href="/blog/2020/03/24/http-and-https-and-tlsssl/">HTTP &amp; HTTPS &amp; TLS/SSL</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">

  
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>




<script src="/blog/js/script.js"></script>




  </div>
</body>
</html>